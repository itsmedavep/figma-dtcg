{
  "version": 3,
  "sources": ["../src/core/normalize.ts", "../src/core/ir.ts", "../src/core/color.ts", "../src/adapters/dtcg-reader.ts", "../src/adapters/dtcg-writer.ts", "../src/adapters/figma-reader.ts", "../src/adapters/figma-writer.ts", "../src/core/pipeline.ts", "../src/app/main.ts"],
  "sourcesContent": ["// src/core/normalize.ts\n// Shared helpers for names, paths, alias parsing, and graph checks.\n\nimport type { TokenGraph, TokenNode, ValueOrAlias } from './ir';\n\n/* =========================\n   Naming & Path Utilities\n   ========================= */\n\nexport function slugSegment(s: string): string {\n  var cleaned = s.replace(/\\s+/g, '-').trim().toLowerCase();\n  var out = '';\n  var i = 0;\n  for (i = 0; i < cleaned.length; i++) {\n    var ch = cleaned.charAt(i);\n    if (ch === '{' || ch === '}' || ch === '.' || ch === ':' || ch === '\\\\' || ch === '/') ch = '-';\n    var ok =\n      (ch >= 'a' && ch <= 'z') ||\n      (ch >= '0' && ch <= '9') ||\n      ch === '-';\n    out += ok ? ch : '-';\n  }\n  out = out.replace(/-+/g, '-');\n  if (out.length > 0 && out.charAt(0) === '$') out = 'dollar' + out.substring(1);\n  if (out.length === 0) out = 'unnamed';\n  return out;\n}\n\nexport function canonicalPath(collectionName: string, variableName: string): string[] {\n  var segs = variableName.split('/');\n  var out: string[] = [];\n  out.push(slugSegment(collectionName));\n  var i = 0;\n  for (i = 0; i < segs.length; i++) out.push(slugSegment(segs[i]));\n  return out;\n}\n\nexport function toDot(path: string[]): string {\n  var i = 0, s = '';\n  for (i = 0; i < path.length; i++) {\n    if (i > 0) s += '.';\n    s += path[i];\n  }\n  return s;\n}\n\nexport function toAliasString(path: string[]): string {\n  return '{' + toDot(path) + '}';\n}\n\nexport function parseAliasString(s: string): string[] | null {\n  if (typeof s !== 'string') return null;\n  if (s.length < 3) return null;\n  if (s.charAt(0) !== '{' || s.charAt(s.length - 1) !== '}') return null;\n  var inner = s.substring(1, s.length - 1);\n  if (!inner) return null;\n  return inner.split('.');\n}\n\n/* =========================\n   Graph Utilities\n   ========================= */\n\nexport function normalize(graph: TokenGraph): TokenGraph {\n  var seen: { [k: string]: 1 } = {};\n  var copy: TokenNode[] = [];\n  var i = 0;\n  for (i = 0; i < graph.tokens.length; i++) {\n    var t = graph.tokens[i];\n    var key = slashPath(t.path);\n    if (!seen[key]) {\n      seen[key] = 1;\n      copy.push(t);\n    }\n  }\n  copy.sort(function (a, b) {\n    var da = toDot(a.path);\n    var db = toDot(b.path);\n    if (da < db) return -1;\n    if (da > db) return 1;\n    return 0;\n  });\n  return { tokens: copy };\n}\n\nfunction slashPath(path: string[]): string {\n  var i = 0, s = '';\n  for (i = 0; i < path.length; i++) {\n    if (i > 0) s += '/';\n    s += path[i];\n  }\n  return s;\n}\n\nexport function indexByDotPath(graph: TokenGraph): { [dot: string]: TokenNode } {\n  var idx: { [dot: string]: TokenNode } = {};\n  var i = 0;\n  for (i = 0; i < graph.tokens.length; i++) {\n    var t = graph.tokens[i];\n    idx[toDot(t.path)] = t;\n  }\n  return idx;\n}\n\nexport function isAlias(v: ValueOrAlias): v is { kind: 'alias'; path: string[] } {\n  return !!v && v.kind === 'alias';\n}\n\nexport function analyzeAliases(graph: TokenGraph): { missing: string[]; cycles: string[][] } {\n  var idx = indexByDotPath(graph);\n  var edges: { [from: string]: string[] } = {};\n  var nodes: string[] = [];\n\n  var i = 0;\n  for (i = 0; i < graph.tokens.length; i++) {\n    var t = graph.tokens[i];\n    var from = toDot(t.path);\n    nodes.push(from);\n    edges[from] = [];\n    var ctxKeys = keysOf(t.byContext);\n    var k = 0;\n    for (k = 0; k < ctxKeys.length; k++) {\n      var ctx = ctxKeys[k];\n      var val = t.byContext[ctx];\n      if (isAlias(val)) {\n        var to = toDot(val.path);\n        edges[from].push(to);\n      }\n    }\n  }\n\n  var missing: string[] = [];\n  var u = 0;\n  for (u = 0; u < nodes.length; u++) {\n    var n = nodes[u];\n    var outs = edges[n];\n    var j = 0;\n    for (j = 0; j < outs.length; j++) {\n      var target = outs[j];\n      if (!idx[target]) {\n        var seen = false;\n        var m = 0;\n        for (m = 0; m < missing.length; m++) if (missing[m] === target) { seen = true; break; }\n        if (!seen) missing.push(target);\n      }\n    }\n  }\n\n  var WHITE = 0, GRAY = 1, BLACK = 2;\n  var color: { [node: string]: number } = {};\n  for (u = 0; u < nodes.length; u++) color[nodes[u]] = WHITE;\n\n  var cycles: string[][] = [];\n\n  function dfs(start: string, stack: string[]): boolean {\n    color[start] = GRAY;\n    stack.push(start);\n    var arr = edges[start];\n    var p = 0;\n    for (p = 0; p < arr.length; p++) {\n      var v = arr[p];\n      if (color[v] === WHITE) {\n        if (dfs(v, stack)) return true;\n      } else if (color[v] === GRAY) {\n        var ci = stack.length - 1;\n        var cyc: string[] = [];\n        while (ci >= 0 && stack[ci] !== v) { ci--; }\n        if (ci >= 0) {\n          var w = ci;\n          for (w = ci; w < stack.length; w++) cyc.push(stack[w]);\n          cyc.push(v);\n        }\n        cycles.push(cyc);\n        return true;\n      }\n    }\n    stack.pop();\n    color[start] = BLACK;\n    return false;\n  }\n\n  for (u = 0; u < nodes.length; u++) {\n    var node = nodes[u];\n    if (color[node] === WHITE) {\n      var stack: string[] = [];\n      dfs(node, stack);\n    }\n  }\n\n  return { missing: missing, cycles: cycles };\n}\n\nfunction keysOf<T>(obj: { [k: string]: T }): string[] {\n  var keys: string[] = [];\n  var k: string;\n  for (k in obj) if (Object.prototype.hasOwnProperty.call(obj, k)) keys.push(k);\n  return keys;\n}\n", "// src/core/ir.ts\n\nexport type PrimitiveType = 'color' | 'number' | 'string' | 'boolean';\n\nexport interface ColorValue {\n  colorSpace: 'srgb' | 'display-p3';\n  components: [number, number, number]; // 0..1\n  alpha?: number;                       // 0..1\n  hex?: string;                         // sRGB fallback \"#RRGGBB\"\n}\n\nexport type ValueOrAlias =\n  | { kind: 'alias'; path: string[] }\n  | { kind: 'color'; value: ColorValue }\n  | { kind: 'number'; value: number }\n  | { kind: 'string'; value: string }\n  | { kind: 'boolean'; value: boolean };\n\nexport interface TokenNode {\n  path: string[];                         // canonical path segments\n  type: PrimitiveType;\n  byContext: { [ctx: string]: ValueOrAlias }; // ctx like \"Collection/Mode\"\n  description?: string;\n  extensions?: { [k: string]: unknown };\n}\n\nexport interface TokenGraph {\n  tokens: TokenNode[];\n}\n\n/** Build a context key like \"Collection/Mode\". */\nexport function ctxKey(collection: string, mode: string): string {\n  return collection + '/' + mode;\n}\n", "// src/core/color.ts\n// Accurate, spec-aligned color handling for DTCG <-> Figma.\n\nimport type { ColorValue } from './ir';\n\nexport type DocumentProfile = 'SRGB' | 'DISPLAY_P3' | 'LEGACY';\n\nfunction clamp01(x: number): number {\n  if (x < 0) return 0;\n  if (x > 1) return 1;\n  return x;\n}\nfunction clamp01Array(v: number[]): number[] {\n  var out: number[] = [];\n  var i = 0;\n  for (i = 0; i < v.length; i++) out.push(clamp01(v[i]));\n  return out;\n}\n\n// sRGB / P3 TRC\nfunction srgbEncode(linear: number): number {\n  if (linear <= 0.0031308) return 12.92 * linear;\n  return 1.055 * Math.pow(linear, 1 / 2.4) - 0.055;\n}\nfunction srgbDecode(encoded: number): number {\n  if (encoded <= 0.04045) return encoded / 12.92;\n  return Math.pow((encoded + 0.055) / 1.055, 2.4);\n}\nvar p3Encode = srgbEncode;\nvar p3Decode = srgbDecode;\n\nfunction mul3(m: number[][], v: number[]): number[] {\n  return [\n    m[0][0] * v[0] + m[0][1] * v[1] + m[0][2] * v[2],\n    m[1][0] * v[0] + m[1][1] * v[1] + m[1][2] * v[2],\n    m[2][0] * v[0] + m[2][1] * v[1] + m[2][2] * v[2],\n  ];\n}\n\n// D65 matrices\nconst M_SRGB_TO_XYZ = [\n  [0.4124564, 0.3575761, 0.1804375],\n  [0.2126729, 0.7151522, 0.0721750],\n  [0.0193339, 0.1191920, 0.9503041],\n];\nconst M_XYZ_TO_SRGB = [\n  [3.2404542, -1.5371385, -0.4985314],\n  [-0.9692660, 1.8760108, 0.0415560],\n  [0.0556434, -0.2040259, 1.0572252],\n];\n\nconst M_P3_TO_XYZ = [\n  [0.4865709486482162, 0.26566769316909306, 0.1982172852343625],\n  [0.2289745640697488, 0.6917385218365064, 0.0792869140937450],\n  [0.0000000000000000, 0.04511338185890264, 1.0439443689009760],\n];\nconst M_XYZ_TO_P3 = [\n  [2.493496911941425, -0.9313836179191239, -0.40271078445071684],\n  [-0.8294889695615747, 1.7626640603183463, 0.02362468584194358],\n  [0.03584583024378447, -0.07617238926804182, 0.9568845240076872],\n];\n\nfunction encode(space: 'srgb' | 'display-p3', linearRGB: number[]): number[] {\n  if (space === 'display-p3') return [p3Encode(linearRGB[0]), p3Encode(linearRGB[1]), p3Encode(linearRGB[2])];\n  return [srgbEncode(linearRGB[0]), srgbEncode(linearRGB[1]), srgbEncode(linearRGB[2])];\n}\nfunction decode(space: 'srgb' | 'display-p3', encodedRGB: number[]): number[] {\n  if (space === 'display-p3') return [p3Decode(encodedRGB[0]), p3Decode(encodedRGB[1]), p3Decode(encodedRGB[2])];\n  return [srgbDecode(encodedRGB[0]), srgbDecode(encodedRGB[1]), srgbDecode(encodedRGB[2])];\n}\n\nfunction convertRgbSpace(rgb: number[], src: 'srgb' | 'display-p3', dst: 'srgb' | 'display-p3'): number[] {\n  if (src === dst) return clamp01Array(rgb);\n  var lin = decode(src, clamp01Array(rgb));\n  var xyz: number[] = src === 'srgb' ? mul3(M_SRGB_TO_XYZ, lin) : mul3(M_P3_TO_XYZ, lin);\n  var linDst: number[] = dst === 'srgb' ? mul3(M_XYZ_TO_SRGB, xyz) : mul3(M_XYZ_TO_P3, xyz);\n  var enc = encode(dst, linDst);\n  return clamp01Array(enc);\n}\n\nfunction srgbToHex6(rgb: number[]): string {\n  var r = Math.round(clamp01(rgb[0]) * 255);\n  var g = Math.round(clamp01(rgb[1]) * 255);\n  var b = Math.round(clamp01(rgb[2]) * 255);\n  function to2(n: number): string { var s = n.toString(16); return s.length === 1 ? '0' + s : s; }\n  return '#' + to2(r) + to2(g) + to2(b);\n}\nfunction srgbToHex8(rgba: { r: number; g: number; b: number; a: number }): string {\n  var r = Math.round(clamp01(rgba.r) * 255);\n  var g = Math.round(clamp01(rgba.g) * 255);\n  var b = Math.round(clamp01(rgba.b) * 255);\n  var a = Math.round(clamp01(rgba.a) * 255);\n  function to2(n: number): string { var s = n.toString(16); return s.length === 1 ? '0' + s : s; }\n  return '#' + to2(r) + to2(g) + to2(b) + to2(a);\n}\n\nfunction isHexCharCode(code: number): boolean {\n  if (code >= 48 && code <= 57) return true;\n  if (code >= 65 && code <= 70) return true;\n  if (code >= 97 && code <= 102) return true;\n  return false;\n}\nfunction hexPairToByte(h1: number, h2: number): number {\n  function val(c: number): number {\n    if (c >= 48 && c <= 57) return c - 48;\n    if (c >= 65 && c <= 70) return c - 55;\n    if (c >= 97 && c <= 102) return c - 87;\n    return 0;\n  }\n  return (val(h1) << 4) | val(h2);\n}\n\nexport function parseHexToSrgbRGBA(hex: string): { r: number; g: number; b: number; a: number } {\n  var s = hex;\n  if (s.length > 0 && s.charAt(0) === '#') s = s.substring(1);\n\n  var i = 0;\n  for (i = 0; i < s.length; i++) {\n    if (!isHexCharCode(s.charCodeAt(i))) throw new Error('Invalid hex color: ' + hex);\n  }\n\n  var r = 0, g = 0, b = 0, a = 255;\n\n  if (s.length === 3 || s.length === 4) {\n    var rNib = s.charCodeAt(0);\n    var gNib = s.charCodeAt(1);\n    var bNib = s.charCodeAt(2);\n    var aNib = s.length === 4 ? s.charCodeAt(3) : 102;\n    r = hexPairToByte(rNib, rNib);\n    g = hexPairToByte(gNib, gNib);\n    b = hexPairToByte(bNib, bNib);\n    a = hexPairToByte(aNib, aNib);\n  } else if (s.length === 6 || s.length === 8) {\n    r = hexPairToByte(s.charCodeAt(0), s.charCodeAt(1));\n    g = hexPairToByte(s.charCodeAt(2), s.charCodeAt(3));\n    b = hexPairToByte(s.charCodeAt(4), s.charCodeAt(5));\n    if (s.length === 8) a = hexPairToByte(s.charCodeAt(6), s.charCodeAt(7));\n  } else {\n    throw new Error('Invalid hex length: ' + hex);\n  }\n\n  return { r: clamp01(r / 255), g: clamp01(g / 255), b: clamp01(b / 255), a: clamp01(a / 255) };\n}\n\nfunction docProfileToSpaceKey(profile: DocumentProfile): 'srgb' | 'display-p3' {\n  if (profile === 'DISPLAY_P3') return 'display-p3';\n  return 'srgb';\n}\n\n/** DTCG -> Figma RGBA in current doc profile. */\nexport function dtcgToFigmaRGBA(\n  value: ColorValue,\n  docProfile: DocumentProfile\n): { r: number; g: number; b: number; a: number } {\n  var alpha = typeof value.alpha === 'number' ? value.alpha : 1;\n  var dst = docProfileToSpaceKey(docProfile);\n\n  var comps = value.components;\n  if (comps && comps.length >= 3) {\n    var space = value.colorSpace;\n    if (space === 'srgb' || space === 'display-p3') {\n      var converted = convertRgbSpace([comps[0], comps[1], comps[2]], space, dst);\n      return { r: converted[0], g: converted[1], b: converted[2], a: clamp01(alpha) };\n    }\n    throw new Error('Unsupported colorSpace: ' + space + '. Supported: srgb, display-p3.');\n  }\n\n  if (value.hex && typeof value.hex === 'string') {\n    var fromHex = parseHexToSrgbRGBA(value.hex);\n    var a = typeof value.alpha === 'number' ? clamp01(value.alpha) : fromHex.a;\n    if (dst === 'srgb') return { r: fromHex.r, g: fromHex.g, b: fromHex.b, a: a };\n    var toDst = convertRgbSpace([fromHex.r, fromHex.g, fromHex.b], 'srgb', dst);\n    return { r: toDst[0], g: toDst[1], b: toDst[2], a: a };\n  }\n\n  throw new Error('Color has neither components nor hex.');\n}\n\n/** Figma -> DTCG in document-native space + sRGB hex fallback. */\nexport function figmaRGBAToDtcg(\n  rgba: { r: number; g: number; b: number; a: number },\n  docProfile: DocumentProfile\n): ColorValue {\n  var src = docProfileToSpaceKey(docProfile);\n  var rgb = [clamp01(rgba.r), clamp01(rgba.g), clamp01(rgba.b)];\n  var a = clamp01(rgba.a);\n\n  var colorSpace: 'srgb' | 'display-p3' = src;\n  var components: [number, number, number] = [rgb[0], rgb[1], rgb[2]];\n\n  var srgbRgb = src === 'srgb' ? rgb : convertRgbSpace(rgb, 'display-p3', 'srgb');\n  var hex = srgbToHex6(srgbRgb);\n\n  return { colorSpace: colorSpace, components: components, alpha: a, hex: hex };\n}\n\n// Legacy wrappers kept for existing callers\nexport function srgbToFigma(color: ColorValue): { r: number; g: number; b: number; a: number } {\n  return dtcgToFigmaRGBA(color, 'SRGB');\n}\nexport function figmaToSrgb(r: number, g: number, b: number, a: number): ColorValue {\n  var comps: [number, number, number] = [clamp01(r), clamp01(g), clamp01(b)];\n  return { colorSpace: 'srgb', components: comps, alpha: clamp01(a) };\n}\n\n// Hex helpers for tooling\nexport function toHex6FromSrgb(rgb: { r: number; g: number; b: number }): string {\n  return srgbToHex6([clamp01(rgb.r), clamp01(rgb.g), clamp01(rgb.b)]);\n}\nexport function toHex8FromSrgb(rgba: { r: number; g: number; b: number; a: number }): string {\n  return srgbToHex8({ r: clamp01(rgba.r), g: clamp01(rgba.g), b: clamp01(rgba.b), a: clamp01(rgba.a) });\n}\nexport function hexToDtcgColor(hex: string): ColorValue {\n  var rgba = parseHexToSrgbRGBA(hex);\n  var comps: [number, number, number] = [rgba.r, rgba.g, rgba.b];\n  return { colorSpace: 'srgb', components: comps, alpha: rgba.a, hex: toHex6FromSrgb({ r: rgba.r, g: rgba.g, b: rgba.b }) };\n}\n", "// src/adapters/dtcg-reader.ts\n// DTCG JSON -> IR TokenGraph (handles aliases, simple $type inheritance)\n\nimport { type TokenGraph, type TokenNode, type PrimitiveType, type ValueOrAlias, ctxKey, type ColorValue } from '../core/ir';\nimport { parseAliasString, slugSegment } from '../core/normalize';\nimport { hexToDtcgColor } from '../core/color';\n\nfunction guessTypeFromValue(v: unknown): PrimitiveType {\n  if (typeof v === 'number') return 'number';\n  if (typeof v === 'string') return 'string';\n  if (typeof v === 'boolean') return 'boolean';\n  return 'string';\n}\n\nfunction isColorObject(obj: unknown): obj is { colorSpace?: string; components?: number[]; alpha?: number; hex?: string } {\n  return !!obj && typeof obj === 'object' && (\n    typeof (obj as { colorSpace?: unknown }).colorSpace === 'string' ||\n    (obj as { components?: unknown }).components instanceof Array ||\n    typeof (obj as { hex?: unknown }).hex === 'string'\n  );\n}\n\nfunction hasKey(o: unknown, k: string): boolean {\n  return !!o && typeof o === 'object' && Object.prototype.hasOwnProperty.call(o, k);\n}\n\nfunction toNumber(x: unknown, def: number): number {\n  return typeof x === 'number' ? x : def;\n}\n\nfunction parseColorSpaceUnion(x: unknown): 'srgb' | 'display-p3' {\n  if (x === 'srgb') return 'srgb';\n  if (x === 'display-p3') return 'display-p3';\n  return 'srgb';\n}\n\nfunction readColorValue(raw: unknown): ColorValue {\n  // Allow either hex string or object form\n  if (typeof raw === 'string') {\n    return hexToDtcgColor(raw);\n  }\n  var obj = raw as { colorSpace?: string; components?: number[]; alpha?: number; hex?: string };\n\n  var cs = parseColorSpaceUnion(obj.colorSpace);\n  var comps: [number, number, number] = [0, 0, 0];\n  if (obj.components && obj.components.length >= 3) {\n    comps = [toNumber(obj.components[0], 0), toNumber(obj.components[1], 0), toNumber(obj.components[2], 0)];\n  }\n  var alpha = typeof obj.alpha === 'number' ? obj.alpha : undefined;\n  var hex = typeof obj.hex === 'string' ? obj.hex : undefined;\n\n  return { colorSpace: cs, components: comps, alpha: alpha, hex: hex };\n}\n\nexport function readDtcgToIR(root: unknown): TokenGraph {\n  var tokens: TokenNode[] = [];\n  var defaultCtx = ctxKey('tokens', 'default');\n\n  function visit(obj: unknown, path: string[], inheritedType: PrimitiveType | null): void {\n    if (!obj || typeof obj !== 'object') return;\n\n    var groupType: PrimitiveType | null = inheritedType;\n    if (hasKey(obj, '$type') && typeof (obj as { $type: unknown }).$type === 'string') {\n      var t = String((obj as { $type: unknown }).$type);\n      if (t === 'color' || t === 'number' || t === 'string' || t === 'boolean') groupType = t;\n    }\n\n    if (hasKey(obj, '$value')) {\n      var rawVal = (obj as { $value: unknown }).$value;\n\n      // alias?\n      if (typeof rawVal === 'string') {\n        var ref = parseAliasString(rawVal);\n        if (ref && ref.length > 0) {\n          tokens.push({\n            path: path.slice(0),\n            type: groupType ? groupType : 'string',\n            byContext: (function () {\n              var o: { [k: string]: ValueOrAlias } = {};\n              o[defaultCtx] = { kind: 'alias', path: ref };\n              return o;\n            })()\n          });\n          return;\n        }\n      }\n\n      // color object or hex\n      if (isColorObject(rawVal) || typeof rawVal === 'string') {\n        var value = readColorValue(rawVal);\n        tokens.push({\n          path: path.slice(0),\n          type: 'color',\n          byContext: (function () {\n            var o: { [k: string]: ValueOrAlias } = {};\n            o[defaultCtx] = { kind: 'color', value: value };\n            return o;\n          })()\n        });\n        return;\n      }\n\n      // primitives\n      var t2 = groupType ? groupType : guessTypeFromValue(rawVal);\n      var valObj: ValueOrAlias | null = null;\n      if (t2 === 'number' && typeof rawVal === 'number') valObj = { kind: 'number', value: rawVal };\n      else if (t2 === 'boolean' && typeof rawVal === 'boolean') valObj = { kind: 'boolean', value: rawVal };\n      else if (t2 === 'string' && typeof rawVal === 'string') valObj = { kind: 'string', value: rawVal };\n      else if (typeof rawVal === 'string') valObj = { kind: 'string', value: rawVal };\n      else if (typeof rawVal === 'number') valObj = { kind: 'number', value: rawVal };\n      else if (typeof rawVal === 'boolean') valObj = { kind: 'boolean', value: rawVal };\n\n      if (valObj) {\n        tokens.push({\n          path: path.slice(0),\n          type: t2,\n          byContext: (function () {\n            var o: { [k: string]: ValueOrAlias } = {};\n            o[defaultCtx] = valObj as ValueOrAlias;\n            return o;\n          })()\n        });\n      }\n      return;\n    }\n\n    // groups\n    var k: string;\n    for (k in obj) {\n      if (!Object.prototype.hasOwnProperty.call(obj, k)) continue;\n      if (k.length > 0 && k.charAt(0) === '$') continue;\n      var child = (obj as { [key: string]: unknown })[k];\n      var newPath = path.concat([slugSegment(k)]);\n      visit(child, newPath, groupType);\n    }\n  }\n\n  visit(root, [], null);\n  return { tokens: tokens };\n}\n", "// src/adapters/dtcg-writer.ts\n// IR -> DTCG object (grouped), including aliases and color values.\n\nimport { type TokenGraph, type TokenNode } from '../core/ir';\nimport { toAliasString } from '../core/normalize';\n\nexport interface SerializeResult {\n  json: unknown;\n}\nexport interface ExportOpts {\n  // reserved for future (e.g., filename templates, grouping strategy)\n}\n\nexport function serialize(graph: TokenGraph, _opts?: ExportOpts): SerializeResult {\n  var root: { [k: string]: unknown } = {};\n\n  var i = 0;\n  for (i = 0; i < graph.tokens.length; i++) {\n    var t = graph.tokens[i];\n    writeTokenInto(root, t);\n  }\n\n  return { json: root };\n}\n\nfunction writeTokenInto(root: { [k: string]: unknown }, t: TokenNode): void {\n  // Build groups\n  var obj = root;\n  var i = 0;\n  for (i = 0; i < t.path.length - 1; i++) {\n    var seg = t.path[i];\n    var next = obj[seg];\n    if (!next || typeof next !== 'object') {\n      next = {};\n      obj[seg] = next;\n    }\n    obj = next as { [k: string]: unknown };\n  }\n\n  var leaf = t.path[t.path.length - 1];\n  var tokenObj: { [k: string]: unknown } = {};\n  tokenObj['$type'] = t.type;\n\n  // Choose a single context to emit; DTCG doesn't encode \"modes\".\n  // We pick the first defined value.\n  var ctxKeys = keysOf(t.byContext);\n  var chosen = ctxKeys.length > 0 ? t.byContext[ctxKeys[0]] : null;\n\n  if (chosen) {\n    if (chosen.kind === 'alias') {\n      tokenObj['$value'] = toAliasString(chosen.path);\n    } else if (chosen.kind === 'color') {\n      var cv = chosen.value;\n      var out: { [k: string]: unknown } = {};\n      out['colorSpace'] = cv.colorSpace;\n      out['components'] = [cv.components[0], cv.components[1], cv.components[2]];\n      if (typeof cv.alpha === 'number') out['alpha'] = cv.alpha;\n      if (typeof cv.hex === 'string') out['hex'] = cv.hex;\n      tokenObj['$value'] = out;\n    } else if (chosen.kind === 'number') {\n      tokenObj['$value'] = chosen.value;\n    } else if (chosen.kind === 'string') {\n      tokenObj['$value'] = chosen.value;\n    } else if (chosen.kind === 'boolean') {\n      tokenObj['$value'] = chosen.value;\n    }\n  }\n\n  if (t.description) tokenObj['$description'] = t.description;\n  if (t.extensions) tokenObj['$extensions'] = t.extensions;\n\n  obj[leaf] = tokenObj;\n}\n\nfunction keysOf<T>(o: { [k: string]: T }): string[] {\n  var out: string[] = [];\n  var k: string;\n  for (k in o) if (Object.prototype.hasOwnProperty.call(o, k)) out.push(k);\n  return out;\n}\n", "// src/adapters/figma-reader.ts\n// Read Figma variables -> IR TokenGraph\n\nimport { figmaRGBAToDtcg, type DocumentProfile } from '../core/color';\nimport { canonicalPath } from '../core/normalize';\nimport { ctxKey, type TokenGraph, type TokenNode, type PrimitiveType, type ValueOrAlias } from '../core/ir';\n\nfunction mapType(t: VariableResolvedDataType): PrimitiveType {\n  if (t === 'COLOR') return 'color';\n  if (t === 'FLOAT') return 'number';\n  if (t === 'STRING') return 'string';\n  return 'boolean';\n}\n\nfunction isAliasValue(v: unknown): v is { type: 'VARIABLE_ALIAS'; id: string } {\n  return !!v && typeof v === 'object' && (v as { type?: string }).type === 'VARIABLE_ALIAS' && typeof (v as { id?: unknown }).id === 'string';\n}\n\nfunction isRGBA(v: unknown): v is { r: number; g: number; b: number; a: number } {\n  return !!v && typeof v === 'object' &&\n    typeof (v as { r?: unknown }).r === 'number' &&\n    typeof (v as { g?: unknown }).g === 'number' &&\n    typeof (v as { b?: unknown }).b === 'number' &&\n    typeof (v as { a?: unknown }).a === 'number';\n}\n\nexport async function readFigmaToIR(): Promise<TokenGraph> {\n  var profile = (figma.root.documentColorProfile as DocumentProfile);\n  var variablesApi = figma.variables;\n\n  // Load collections\n  var collections = await variablesApi.getLocalVariableCollectionsAsync();\n\n  // Build a map variableId -> { name, collectionId }\n  var varMeta: { [id: string]: { name: string; collectionId: string } } = {};\n  var ci = 0;\n  for (ci = 0; ci < collections.length; ci++) {\n    var col = collections[ci];\n    var vi = 0;\n    for (vi = 0; vi < col.variableIds.length; vi++) {\n      var id = col.variableIds[vi];\n      var v = await variablesApi.getVariableByIdAsync(id);\n      if (v) varMeta[v.id] = { name: v.name, collectionId: col.id };\n    }\n  }\n\n  var tokens: TokenNode[] = [];\n\n  for (ci = 0; ci < collections.length; ci++) {\n    var c = collections[ci];\n    var mi = 0;\n    // Mode name lookup\n    var modeNameById: { [id: string]: string } = {};\n    for (mi = 0; mi < c.modes.length; mi++) modeNameById[c.modes[mi].modeId] = c.modes[mi].name;\n\n    var vi2 = 0;\n    for (vi2 = 0; vi2 < c.variableIds.length; vi2++) {\n      var vid = c.variableIds[vi2];\n      var v2 = await variablesApi.getVariableByIdAsync(vid);\n      if (!v2) continue;\n\n      var path = canonicalPath(c.name, v2.name);\n      var type = mapType(v2.resolvedType);\n      var byContext: { [ctx: string]: ValueOrAlias } = {};\n\n      // For each mode, collect value\n      var mi2 = 0;\n      for (mi2 = 0; mi2 < c.modes.length; mi2++) {\n        var md = c.modes[mi2];\n        var ctx = ctxKey(c.name, md.name);\n        var mv = v2.valuesByMode[md.modeId];\n\n        if (isAliasValue(mv)) {\n          var target = await variablesApi.getVariableByIdAsync(mv.id);\n          if (target) {\n            // resolve collection name for target\n            var meta = varMeta[target.id];\n            var collName = meta ? collections.filter(function (cc) { return cc.id === meta.collectionId; }).map(function (cc) { return cc.name; })[0] : c.name;\n            var aPath = canonicalPath(collName, target.name);\n            byContext[ctx] = { kind: 'alias', path: aPath };\n          }\n          continue;\n        }\n\n        if (type === 'color' && isRGBA(mv)) {\n          var cv = figmaRGBAToDtcg({ r: mv.r, g: mv.g, b: mv.b, a: mv.a }, profile);\n          byContext[ctx] = { kind: 'color', value: cv };\n          continue;\n        }\n\n        if (typeof mv === 'number') { byContext[ctx] = { kind: 'number', value: mv }; continue; }\n        if (typeof mv === 'boolean') { byContext[ctx] = { kind: 'boolean', value: mv }; continue; }\n        if (typeof mv === 'string') { byContext[ctx] = { kind: 'string', value: mv }; continue; }\n        // else unhandled null/undefined -> skip\n      }\n\n      tokens.push({ path: path, type: type, byContext: byContext });\n    }\n  }\n\n  return { tokens: tokens };\n}\n", "// src/adapters/figma-writer.ts\n// Apply IR TokenGraph -> Figma variables (create/update, then set per-mode values)\n\nimport { dtcgToFigmaRGBA, type DocumentProfile } from '../core/color';\nimport { toDot } from '../core/normalize';\nimport { type TokenGraph, type TokenNode, type ValueOrAlias, type PrimitiveType, ctxKey } from '../core/ir';\n\nfunction resolvedTypeFor(t: PrimitiveType): VariableResolvedDataType {\n  if (t === 'color') return 'COLOR';\n  if (t === 'number') return 'FLOAT';\n  if (t === 'string') return 'STRING';\n  return 'BOOLEAN';\n}\n\nfunction forEachKey<T>(obj: { [k: string]: T }): string[] {\n  var out: string[] = [];\n  var k: string;\n  for (k in obj) if (Object.prototype.hasOwnProperty.call(obj, k)) out.push(k);\n  return out;\n}\n\nexport async function writeIRToFigma(graph: TokenGraph): Promise<void> {\n  var profile = figma.root.documentColorProfile as DocumentProfile;\n  var variablesApi = figma.variables;\n\n  // Load existing collections\n  var existing = await variablesApi.getLocalVariableCollectionsAsync();\n  var colByName: { [name: string]: VariableCollection } = {};\n  var ci = 0;\n  for (ci = 0; ci < existing.length; ci++) colByName[existing[ci].name] = existing[ci];\n\n  // Pass 1: ensure collections and variables exist; build path->id map\n  var idByPath: { [dot: string]: string } = {};\n\n  var i = 0;\n  for (i = 0; i < graph.tokens.length; i++) {\n    var t = graph.tokens[i];\n\n    if (t.path.length < 1) continue;\n    var collectionName = t.path[0];\n\n    var collection = colByName[collectionName];\n    if (!collection) {\n      collection = variablesApi.createVariableCollection(collectionName);\n      colByName[collectionName] = collection;\n    }\n\n    // variable name is everything after collection joined with '/'\n    var j = 1, varName = '';\n    for (j = 1; j < t.path.length; j++) {\n      if (j > 1) varName += '/';\n      varName += t.path[j];\n    }\n\n    // try to find existing variable by name\n    var existingVarId: string | null = null;\n    var k = 0;\n    for (k = 0; k < collection.variableIds.length; k++) {\n      var cand = await variablesApi.getVariableByIdAsync(collection.variableIds[k]);\n      if (cand && cand.name === varName) { existingVarId = cand.id; break; }\n    }\n\n    var createdOrFound: Variable;\n    if (existingVarId) {\n      var got = await variablesApi.getVariableByIdAsync(existingVarId);\n      if (!got) continue;\n      createdOrFound = got;\n    } else {\n      var variableType = resolvedTypeFor(t.type);\n      createdOrFound = variablesApi.createVariable(varName, collection, variableType);\n    }\n\n    idByPath[toDot(t.path)] = createdOrFound.id;\n  }\n\n  // Build mode id lookup by (collectionName, modeName)\n  var modeIdByKey: { [key: string]: string } = {};\n  var cols = await variablesApi.getLocalVariableCollectionsAsync();\n  var cii = 0;\n  for (cii = 0; cii < cols.length; cii++) {\n    var c = cols[cii];\n    var mi = 0;\n    for (mi = 0; mi < c.modes.length; mi++) {\n      var k2 = c.name + '/' + c.modes[mi].name;\n      modeIdByKey[k2] = c.modes[mi].modeId;\n    }\n  }\n\n  // Pass 2: set values (including aliases)\n  for (i = 0; i < graph.tokens.length; i++) {\n    var node = graph.tokens[i];\n\n    var dot = toDot(node.path);\n    var varId = idByPath[dot];\n    if (!varId) continue;\n\n    var targetVar = await variablesApi.getVariableByIdAsync(varId);\n    if (!targetVar) continue;\n\n    var ctxKeys = forEachKey(node.byContext);\n    var z = 0;\n    for (z = 0; z < ctxKeys.length; z++) {\n      var ctx = ctxKeys[z];\n      var val = node.byContext[ctx];\n\n      var modeId = modeIdByKey[ctx];\n      if (!modeId) continue;\n\n      if (val.kind === 'alias') {\n        var targetId = idByPath[toDot(val.path)];\n        if (!targetId) continue;\n        var alias = await variablesApi.createVariableAliasByIdAsync(targetId);\n        targetVar.setValueForMode(modeId, alias);\n      } else if (val.kind === 'color') {\n        var rgba = dtcgToFigmaRGBA(val.value, profile);\n        targetVar.setValueForMode(modeId, { r: rgba.r, g: rgba.g, b: rgba.b, a: rgba.a });\n      } else if (val.kind === 'number') {\n        targetVar.setValueForMode(modeId, val.value);\n      } else if (val.kind === 'string') {\n        targetVar.setValueForMode(modeId, val.value);\n      } else if (val.kind === 'boolean') {\n        targetVar.setValueForMode(modeId, val.value);\n      }\n    }\n  }\n}\n", "// src/core/pipeline.ts\n// Pipeline glue between adapters and the UI.\n// - importDtcg: DTCG JSON -> IR -> write to Figma\n// - exportDtcg: read IR from Figma -> serialize to DTCG; package as files\n\nimport { normalize } from './normalize';\nimport { toDot } from './normalize';\nimport { readDtcgToIR } from '../adapters/dtcg-reader';\nimport { serialize } from '../adapters/dtcg-writer';\nimport { readFigmaToIR } from '../adapters/figma-reader';\nimport { writeIRToFigma } from '../adapters/figma-writer';\nimport type { TokenGraph, TokenNode, ValueOrAlias } from './ir';\n\nexport interface ExportOpts { format: 'single' | 'perMode' }\nexport interface ExportResult { files: Array<{ name: string; json: unknown }> }\n\n// ---------- helpers ----------\n\nfunction keysOf<T>(obj: { [k: string]: T }): string[] {\n  var out: string[] = [];\n  var k: string;\n  for (k in obj) if (Object.prototype.hasOwnProperty.call(obj, k)) out.push(k);\n  return out;\n}\n\nfunction sanitizeForFile(s: string): string {\n  var out = '';\n  var i = 0;\n  for (i = 0; i < s.length; i++) {\n    var ch = s.charAt(i);\n    if (ch === '/' || ch === '\\\\' || ch === ':') out += '_';\n    else out += ch;\n  }\n  return out;\n}\n\nfunction cloneTokenWithSingleContext(t: TokenNode, ctx: string): TokenNode | null {\n  var val = t.byContext[ctx];\n  if (!val) return null;\n\n  // shallow clone without spreads\n  var copyByCtx: { [k: string]: ValueOrAlias } = {};\n  copyByCtx[ctx] = val;\n\n  return {\n    path: (function () { var arr: string[] = []; var i = 0; for (i = 0; i < t.path.length; i++) arr.push(t.path[i]); return arr; })(),\n    type: t.type,\n    byContext: copyByCtx,\n    description: t.description,\n    extensions: t.extensions\n  };\n}\n\n// ---------- API ----------\n\nexport async function importDtcg(json: unknown): Promise<void> {\n  // Build desired graph from DTCG, then write directly to Figma.\n  // (Diffing/plan is optional; we keep a single code path for now.)\n  var desired = normalize(readDtcgToIR(json));\n  await writeIRToFigma(desired);\n}\n\nexport async function exportDtcg(opts: ExportOpts): Promise<ExportResult> {\n  var current = await readFigmaToIR();\n  var graph = normalize(current);\n\n  if (opts.format === 'single') {\n    // One file with whatever contexts exist; writer will emit the first available per token.\n    var single = serialize(graph);\n    return { files: [{ name: 'tokens.json', json: single.json }] };\n  }\n\n  // Per mode: split graph by context \"Collection/Mode\", one file each.\n  var contexts: string[] = [];\n  var i = 0;\n  for (i = 0; i < graph.tokens.length; i++) {\n    var t = graph.tokens[i];\n    var ks = keysOf(t.byContext);\n    var j = 0;\n    for (j = 0; j < ks.length; j++) {\n      var c = ks[j];\n      // push if unique\n      var found = false;\n      var k = 0;\n      for (k = 0; k < contexts.length; k++) if (contexts[k] === c) { found = true; break; }\n      if (!found) contexts.push(c);\n    }\n  }\n\n  // Build a file per context\n  var files: Array<{ name: string; json: unknown }> = [];\n  var ci = 0;\n  for (ci = 0; ci < contexts.length; ci++) {\n    var ctx = contexts[ci];\n\n    // Create a filtered graph where each token only carries this ctx (if present)\n    var filtered: TokenGraph = { tokens: [] };\n    var ii = 0;\n    for (ii = 0; ii < graph.tokens.length; ii++) {\n      var tok = graph.tokens[ii];\n      var one = cloneTokenWithSingleContext(tok, ctx);\n      if (one) filtered.tokens.push(one);\n    }\n\n    // If nothing in this context, skip\n    if (filtered.tokens.length === 0) continue;\n\n    var out = serialize(filtered);\n\n    // ctx format is \"Collection/Mode\"\n    var slash = ctx.indexOf('/');\n    var collection = slash >= 0 ? ctx.substring(0, slash) : ctx;\n    var mode = slash >= 0 ? ctx.substring(slash + 1) : 'default';\n\n    var fname = sanitizeForFile(collection) + '_mode=' + sanitizeForFile(mode) + '.tokens.json';\n    files.push({ name: fname, json: out.json });\n  }\n\n  // Fallback: if no contexts were found, still emit a single file\n  if (files.length === 0) {\n    var fallback = serialize(graph);\n    files.push({ name: 'tokens.json', json: fallback.json });\n  }\n\n  return { files: files };\n}\n", "// src/app/main.ts\nimport type { UiToPlugin, PluginToUi } from './messages';\nimport { importDtcg, exportDtcg } from '../core/pipeline';\n\n// __html__ is injected by your build (esbuild) from dist/ui.html with ui.js inlined.\ndeclare const __html__: string;\n\n// Use saved size if available; fall back to 960\u00D7540.\n(async function initUI() {\n  var w = 960, h = 540;\n  try {\n    var saved = await figma.clientStorage.getAsync('uiSize');\n    if (saved && typeof saved.width === 'number' && typeof saved.height === 'number') {\n      var sw = Math.floor(saved.width);\n      var sh = Math.floor(saved.height);\n      w = Math.max(720, Math.min(1600, sw));\n      h = Math.max(420, Math.min(1200, sh));\n    }\n  } catch (_e) { /* ignore */ }\n  figma.showUI(__html__, { width: w, height: h });\n})();\n\n\nfunction send(msg: PluginToUi): void {\n  figma.ui.postMessage(msg);\n}\n\nasync function snapshotCollectionsForUi(): Promise<{\n  collections: Array<{\n    id: string;\n    name: string;\n    modes: Array<{ id: string; name: string }>;\n    variables: Array<{ id: string; name: string; type: string }>;\n  }>;\n  rawText: string;\n}> {\n  if (typeof figma.editorType !== 'string' || figma.editorType !== 'figma') {\n    return {\n      collections: [],\n      rawText:\n        'Variables API is not available in this editor.\\n' +\n        'Open a Figma Design file (not FigJam) and try again.'\n    };\n  }\n  if (\n    typeof figma.variables === 'undefined' ||\n    typeof figma.variables.getLocalVariableCollectionsAsync !== 'function' ||\n    typeof figma.variables.getVariableByIdAsync !== 'function'\n  ) {\n    return {\n      collections: [],\n      rawText:\n        'Variables API methods not found. Ensure your Figma version supports Variables and try again.'\n    };\n  }\n\n  const locals: VariableCollection[] = await figma.variables.getLocalVariableCollectionsAsync();\n\n  const out: Array<{\n    id: string;\n    name: string;\n    modes: Array<{ id: string; name: string }>;\n    variables: Array<{ id: string; name: string; type: string }>;\n  }> = [];\n  const rawLines: string[] = [];\n\n  let i = 0;\n  for (i = 0; i < locals.length; i++) {\n    const c = locals[i];\n    if (!c) continue;\n\n    const modes: Array<{ id: string; name: string }> = [];\n    let mi = 0;\n    for (mi = 0; mi < c.modes.length; mi++) {\n      const m = c.modes[mi];\n      modes.push({ id: m.modeId, name: m.name });\n    }\n\n    const varsList: Array<{ id: string; name: string; type: string }> = [];\n    let vi = 0;\n    for (vi = 0; vi < c.variableIds.length; vi++) {\n      const varId = c.variableIds[vi];\n      const v = await figma.variables.getVariableByIdAsync(varId);\n      if (!v) continue;\n      varsList.push({ id: v.id, name: v.name, type: v.resolvedType });\n    }\n\n    out.push({ id: c.id, name: c.name, modes: modes, variables: varsList });\n\n    rawLines.push('Collection: ' + c.name + ' (' + c.id + ')');\n    const modeNames: string[] = [];\n    let zi = 0; for (zi = 0; zi < modes.length; zi++) modeNames.push(modes[zi].name);\n    rawLines.push('  Modes: ' + (modeNames.length > 0 ? modeNames.join(', ') : '(none)'));\n    rawLines.push('  Variables (' + String(varsList.length) + '):');\n    let qi = 0; for (qi = 0; qi < varsList.length; qi++) rawLines.push('    - ' + varsList[qi].name + ' [' + varsList[qi].type + ']');\n    rawLines.push('');\n  }\n\n  if (out.length === 0) {\n    rawLines.push('No local Variable Collections found.');\n    rawLines.push('Create one in the Variables panel, then press Refresh.');\n  }\n\n  return { collections: out, rawText: rawLines.join('\\n') };\n}\n\nfunction safeKeyFromCollectionAndMode(collectionName: string, modeName: string): string {\n  const base = collectionName + '/mode=' + modeName;\n  let i = 0, out = '';\n  for (i = 0; i < base.length; i++) {\n    const ch = base.charAt(i);\n    if (ch === '/' || ch === '\\\\' || ch === ':') out += '_'; else out += ch;\n  }\n  return out;\n}\n\nfigma.ui.onmessage = async (msg: UiToPlugin) => {\n  try {\n    if (msg.type === 'UI_READY') {\n      const snap = await snapshotCollectionsForUi();\n      // Load prefs\n      const last = await figma.clientStorage.getAsync('lastSelection').catch(function () { return null; });\n      const exportAllPrefVal = await figma.clientStorage.getAsync('exportAllPref').catch(function () { return false; });\n      const lastOrNull = last && typeof last.collection === 'string' && typeof last.mode === 'string'\n        ? last\n        : null;\n\n      send({ type: 'INFO', payload: { message: 'Fetched ' + String(snap.collections.length) + ' collections (initial)' } });\n      send({ type: 'COLLECTIONS_DATA', payload: { collections: snap.collections, last: lastOrNull, exportAllPref: !!exportAllPrefVal } });\n      send({ type: 'RAW_COLLECTIONS_TEXT', payload: { text: snap.rawText } });\n      return;\n    }\n\n    if (msg.type === 'FETCH_COLLECTIONS') {\n      const snapshot = await snapshotCollectionsForUi();\n      const last = await figma.clientStorage.getAsync('lastSelection').catch(function () { return null; });\n      const exportAllPrefVal = await figma.clientStorage.getAsync('exportAllPref').catch(function () { return false; });\n      const lastOrNull = last && typeof last.collection === 'string' && typeof last.mode === 'string'\n        ? last\n        : null;\n\n      send({ type: 'INFO', payload: { message: 'Fetched ' + String(snapshot.collections.length) + ' collections' } });\n      send({ type: 'COLLECTIONS_DATA', payload: { collections: snapshot.collections, last: lastOrNull, exportAllPref: !!exportAllPrefVal } });\n      send({ type: 'RAW_COLLECTIONS_TEXT', payload: { text: snapshot.rawText } });\n      return;\n    }\n\n    if (msg.type === 'IMPORT_DTCG') {\n      await importDtcg(msg.payload.json);\n      send({ type: 'INFO', payload: { message: 'Import completed.' } });\n      const snap2 = await snapshotCollectionsForUi();\n      const last = await figma.clientStorage.getAsync('lastSelection').catch(function () { return null; });\n      const exportAllPrefVal = await figma.clientStorage.getAsync('exportAllPref').catch(function () { return false; });\n      const lastOrNull = last && typeof last.collection === 'string' && typeof last.mode === 'string'\n        ? last\n        : null;\n\n      send({ type: 'COLLECTIONS_DATA', payload: { collections: snap2.collections, last: lastOrNull, exportAllPref: !!exportAllPrefVal } });\n      send({ type: 'RAW_COLLECTIONS_TEXT', payload: { text: snap2.rawText } });\n      return;\n    }\n\n    if (msg.type === 'EXPORT_DTCG') {\n      const exportAll = !!msg.payload.exportAll;\n      if (exportAll) {\n        const all = await exportDtcg({ format: 'single' });\n        send({ type: 'EXPORT_RESULT', payload: { files: all.files } });\n        return;\n      }\n\n      const collectionName = msg.payload.collection ? msg.payload.collection : '';\n      const modeName = msg.payload.mode ? msg.payload.mode : '';\n      const per = await exportDtcg({ format: 'perMode' });\n\n      const key = safeKeyFromCollectionAndMode(collectionName, modeName);\n      const picked: Array<{ name: string; json: unknown }> = [];\n      let i2 = 0; for (i2 = 0; i2 < per.files.length; i2++) if (per.files[i2].name.indexOf(key) !== -1) picked.push(per.files[i2]);\n      send({ type: 'EXPORT_RESULT', payload: { files: picked.length > 0 ? picked : per.files } });\n      return;\n    }\n\n    if (msg.type === 'SAVE_LAST') {\n      // Persist selection\n      if (msg.payload && typeof msg.payload.collection === 'string' && typeof msg.payload.mode === 'string') {\n        await figma.clientStorage.setAsync('lastSelection', { collection: msg.payload.collection, mode: msg.payload.mode });\n      }\n      return;\n    }\n\n    if (msg.type === 'SAVE_PREFS') {\n      await figma.clientStorage.setAsync('exportAllPref', !!msg.payload.exportAll);\n      return;\n    }\n\n    if (msg.type === 'UI_RESIZE') {\n      var w = Math.max(720, Math.min(1600, Math.floor(msg.payload.width)));\n      var h = Math.max(420, Math.min(1200, Math.floor(msg.payload.height)));\n      figma.ui.resize(w, h);\n      try { await figma.clientStorage.setAsync('uiSize', { width: w, height: h }); } catch (_err) { }\n      // send({ type: 'INFO', payload: { message: 'Resized UI to ' + w + '\u00D7' + h } }); // <\u2014 add this single line\n      return;\n    }\n\n\n  } catch (e) {\n    var message = 'Unknown error';\n    if (e && (e as Error).message) message = (e as Error).message;\n    figma.notify('Plugin error: ' + message, { timeout: 4000 });\n    send({ type: 'ERROR', payload: { message: message } });\n    // eslint-disable-next-line no-console\n    console.error(e);\n  }\n};\n"],
  "mappings": "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A;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA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",
  "names": ["keysOf"]
}
