{
  "version": 3,
  "sources": ["../src/app/ui.ts"],
  "sourcesContent": ["\nimport type { PluginToUi, UiToPlugin } from './messages';\n\nconst logEl = document.getElementById('log')!;\nfunction log(msg: string) {\n  const t = new Date().toLocaleTimeString();\n  logEl.textContent += `[${t}] ${msg}\\n`;\n  logEl.scrollTop = logEl.scrollHeight;\n}\n\n// Import\nconst importBtn = document.getElementById('importBtn') as HTMLButtonElement;\nimportBtn.addEventListener('click', async () => {\n  const fileInput = document.getElementById('file') as HTMLInputElement;\n  const collection = (document.getElementById('collection') as HTMLInputElement).value.trim();\n  const mode = (document.getElementById('mode') as HTMLInputElement).value.trim();\n  if (!fileInput.files && fileInput.files[0]) return log('Please select a JSON file.');\n  if (!collection || !mode) return log('Please provide collection and mode names.');\n  try {\n    const text = await fileInput.files[0].text();\n    const json = JSON.parse(text);\n    parent.postMessage({ pluginMessage: { type: 'IMPORT_DTCG', payload: { json, collection, mode } } as UiToPlugin }, '*');\n    log('Sent import request to plugin.');\n  } catch (e:any) {\n    log('Failed to read JSON: ' + e?.message);\n  }\n});\n\n// Export\nconst exportBtn = document.getElementById('exportBtn') as HTMLButtonElement;\nexportBtn.addEventListener('click', () => {\n  const fmt = (document.querySelector('input[name=\"fmt\"]:checked') as HTMLInputElement).value as 'single'|'perMode';\n  parent.postMessage({ pluginMessage: { type: 'EXPORT_DTCG', payload: { format: fmt } } as UiToPlugin }, '*');\n  log('Requested export.');\n});\n\n// Receive messages from plugin\nwindow.onmessage = (event: MessageEvent<{ pluginMessage?: PluginToUi }>) => {\n  const msg = event.data.pluginMessage;\n  if (!msg) return;\n  if (msg.type === 'ERROR') {\n    log('ERROR: ' + msg.payload.message);\n  } else if (msg.type === 'INFO') {\n    log(msg.payload.message);\n  } else if (msg.type === 'EXPORT_RESULT') {\n    // Offer downloads\n    for (const f of msg.payload.files) {\n      const a = document.createElement('a');\n      const blob = new Blob([JSON.stringify(f.json, null, 2)], { type: 'application/json' });\n      a.href = URL.createObjectURL(blob);\n      a.download = f.name;\n      a.textContent = 'Download ' + f.name;\n      const div = document.createElement('div');\n      div.appendChild(a);\n      logEl.appendChild(div);\n    }\n    log('Export ready.');\n  }\n};\n"],
  "mappings": ";;;AAGA,MAAM,QAAQ,SAAS,eAAe,KAAK;AAC3C,WAAS,IAAI,KAAa;AACxB,UAAM,KAAI,oBAAI,KAAK,GAAE,mBAAmB;AACxC,UAAM,eAAe,IAAI,CAAC,KAAK,GAAG;AAAA;AAClC,UAAM,YAAY,MAAM;AAAA,EAC1B;AAGA,MAAM,YAAY,SAAS,eAAe,WAAW;AACrD,YAAU,iBAAiB,SAAS,YAAY;AAC9C,UAAM,YAAY,SAAS,eAAe,MAAM;AAChD,UAAM,aAAc,SAAS,eAAe,YAAY,EAAuB,MAAM,KAAK;AAC1F,UAAM,OAAQ,SAAS,eAAe,MAAM,EAAuB,MAAM,KAAK;AAC9E,QAAI,CAAC,UAAU,SAAS,UAAU,MAAM,CAAC,EAAG,QAAO,IAAI,4BAA4B;AACnF,QAAI,CAAC,cAAc,CAAC,KAAM,QAAO,IAAI,2CAA2C;AAChF,QAAI;AACF,YAAM,OAAO,MAAM,UAAU,MAAM,CAAC,EAAE,KAAK;AAC3C,YAAM,OAAO,KAAK,MAAM,IAAI;AAC5B,aAAO,YAAY,EAAE,eAAe,EAAE,MAAM,eAAe,SAAS,EAAE,MAAM,YAAY,KAAK,EAAE,EAAgB,GAAG,GAAG;AACrH,UAAI,gCAAgC;AAAA,IACtC,SAAS,GAAO;AACd,UAAI,2BAA0B,uBAAG,QAAO;AAAA,IAC1C;AAAA,EACF,CAAC;AAGD,MAAM,YAAY,SAAS,eAAe,WAAW;AACrD,YAAU,iBAAiB,SAAS,MAAM;AACxC,UAAM,MAAO,SAAS,cAAc,2BAA2B,EAAuB;AACtF,WAAO,YAAY,EAAE,eAAe,EAAE,MAAM,eAAe,SAAS,EAAE,QAAQ,IAAI,EAAE,EAAgB,GAAG,GAAG;AAC1G,QAAI,mBAAmB;AAAA,EACzB,CAAC;AAGD,SAAO,YAAY,CAAC,UAAwD;AAC1E,UAAM,MAAM,MAAM,KAAK;AACvB,QAAI,CAAC,IAAK;AACV,QAAI,IAAI,SAAS,SAAS;AACxB,UAAI,YAAY,IAAI,QAAQ,OAAO;AAAA,IACrC,WAAW,IAAI,SAAS,QAAQ;AAC9B,UAAI,IAAI,QAAQ,OAAO;AAAA,IACzB,WAAW,IAAI,SAAS,iBAAiB;AAEvC,iBAAW,KAAK,IAAI,QAAQ,OAAO;AACjC,cAAM,IAAI,SAAS,cAAc,GAAG;AACpC,cAAM,OAAO,IAAI,KAAK,CAAC,KAAK,UAAU,EAAE,MAAM,MAAM,CAAC,CAAC,GAAG,EAAE,MAAM,mBAAmB,CAAC;AACrF,UAAE,OAAO,IAAI,gBAAgB,IAAI;AACjC,UAAE,WAAW,EAAE;AACf,UAAE,cAAc,cAAc,EAAE;AAChC,cAAM,MAAM,SAAS,cAAc,KAAK;AACxC,YAAI,YAAY,CAAC;AACjB,cAAM,YAAY,GAAG;AAAA,MACvB;AACA,UAAI,eAAe;AAAA,IACrB;AAAA,EACF;",
  "names": []
}
